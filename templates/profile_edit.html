{% extends "base.html" %}
{% block title %}Modifica profilo{% endblock %}
{% block content %}
<div class="min-h-screen w-full bg-slate-100 flex flex-col items-center py-12 px-2">
  <div class="w-full max-w-4xl bg-white rounded-2xl shadow-2xl p-8">
    <h1 class="text-3xl md:text-4xl font-bold text-blue-900 mb-8 text-center tracking-wide">Modifica profilo personale</h1>
    <form method="post" class="grid grid-cols-1 gap-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Nome -->
        <div class="grid gap-2">
          <label class="text-sm font-medium text-slate-700">Nome</label>
          <input name="name" value="{{ user.name }}" required 
                 class="w-full rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition"/>
        </div>
        <!-- Email -->
        <div class="grid gap-2">
          <label class="text-sm font-medium text-slate-700">E-mail</label>
          <input type="email" name="email" value="{{ user.email }}" required 
                 class="w-full rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition"/>
        </div>
        <!-- Ruolo (solo visualizzazione) -->
        <div class="grid gap-2 md:col-span-2">
          <label class="text-sm font-medium text-slate-700">Ruolo</label>
          <input type="text" value="{{ user.role|capitalize }}" disabled
                 class="w-full rounded-lg border border-slate-200 bg-slate-100 px-4 py-2 text-base text-slate-800"/>
        </div>
        <!-- Filiale -->
        <div class="grid gap-2">
          <label for="branch" class="text-sm font-medium text-slate-700">Filiale</label>
          <select id="branch" name="branch" required 
                  class="w-full rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition">
            <option value="*"         {{ "selected" if user.branch == "*" }}>*</option>
            <option value="HQE"       {{ "selected" if user.branch == "HQE" }}>HQE</option>
            <option value="HQ ITALIA" {{ "selected" if user.branch == "HQ ITALIA" }}>HQ&nbsp;ITALIA</option>
            <option value="HQIA"      {{ "selected" if user.branch == "HQIA" }}>HQIA</option>
          </select>
        </div>
        <!-- Tipologia Assunzione -->
        <div class="grid gap-2">
          <label for="employment_type" class="text-sm font-medium text-slate-700">Tipologia Assunzione</label>
          <select id="employment_type" name="employment_type" required 
                  class="w-full rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition">
            <option value="*" {{ "selected" if user.employment_type == "*" }}>Tutte</option>
            <option value="TD" {{ "selected" if user.employment_type == "TD" }}>Tempo Determinato</option>
            <option value="TI" {{ "selected" if user.employment_type == "TI" }}>Tempo Indeterminato</option>
            <option value="AP" {{ "selected" if user.employment_type == "AP" }}>Apprendistato</option>
            <option value="CO" {{ "selected" if user.employment_type == "CO" }}>Collaborazione</option>
          </select>
        </div>
        <!-- BU -->
        <div class="grid gap-2">
          <label for="bu" class="text-sm font-medium text-slate-700">BU</label>
          <input id="bu" name="bu" type="text" value="{{ user.bu or '' }}"
                 class="w-full rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition">
        </div>
        <!-- Team -->
        <div class="grid gap-2">
          <label for="team" class="text-sm font-medium text-slate-700">Team</label>
          <input id="team" name="team" type="text" value="{{ user.team or '' }}"
                 class="w-full rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition">
        </div>
        <!-- Data di nascita -->
        <div class="grid gap-2">
          <label for="birth_date" class="text-sm font-medium text-slate-700">Data di nascita</label>
          <input id="birth_date" name="birth_date" type="date" value="{{ user.birth_date or '' }}"
                 class="w-full rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition">
        </div>
        <!-- Sesso -->
        <div class="grid gap-2">
          <label for="sex" class="text-sm font-medium text-slate-700">Sesso</label>
          <select id="sex" name="sex"
                  class="w-full rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition">
            <option value=""></option>
            <option value="M" {{ "selected" if user.sex=="M" }}>M</option>
            <option value="F" {{ "selected" if user.sex=="F" }}>F</option>
          </select>
        </div>
        <!-- Cittadinanza -->
        <div class="md:col-span-2 grid gap-2">
          <label for="citizenship" class="text-sm font-medium text-slate-700">Cittadinanza</label>
          <input id="citizenship" name="citizenship" type="text" value="{{ user.citizenship or '' }}"
                 class="w-full rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition">
        </div>
      </div>
      <div class="text-right space-x-2">
        <a href="{{ url_for('profile') }}"
           class="inline-flex items-center gap-1 rounded-lg bg-blue-100 px-4 py-2 text-sm font-medium text-blue-800 shadow hover:bg-blue-200 transition">Annulla</a>
        <button type="submit" 
                class="inline-flex items-center gap-1 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow hover:bg-blue-700 transition">Salva</button>
      </div>
    </form>
  </div>
</div>
{% endblock %} 