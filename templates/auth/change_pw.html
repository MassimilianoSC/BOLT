{% extends "base.html" %}

{% block content %}
<div class="min-h-screen w-full bg-slate-100 flex flex-col items-center py-12 px-2">
  <div class="w-full max-w-4xl bg-white rounded-2xl shadow-2xl p-8">
    {% if request.query_params.get('first') %}
    <p class="mb-4 p-3 bg-yellow-100 border border-yellow-400">
      È il tuo primo accesso: imposta subito una password personale.
    </p>
    {% endif %}

    {% if error %}
    <p class="text-red-600">{{ error }}</p>
    {% endif %}

    <h1 class="text-3xl font-semibold text-slate-800 text-center mb-8">
      Cambia password
    </h1>

    <form method="post" class="mx-auto grid max-w-sm gap-6">
      <input type="hidden" name="_csrf" value="{{ csrf_token }}">
      
      <div class="grid gap-2">
        <label for="old_pw" class="text-sm font-medium text-slate-700">
          Password attuale
        </label>
        <input type="password" 
               id="old_pw"
               name="old_pw" 
               class="rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition"
               autocomplete="current-password"
               required>
      </div>

      <div class="grid gap-2">
        <label for="new_pw" class="text-sm font-medium text-slate-700">
          Nuova password (≥ 8 car.)
        </label>
        <input type="password" 
               id="new_pw"
               name="new_pw" 
               minlength="8" 
               class="rounded-lg border border-slate-300 px-4 py-2 text-base text-slate-800 placeholder-slate-400 focus:border-blue-500 focus:ring-blue-500 transition"
               autocomplete="new-password"
               required>
      </div>

      <div>
        <button type="submit" 
                class="inline-flex items-center gap-1 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow hover:bg-blue-700 transition">
          Salva
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}